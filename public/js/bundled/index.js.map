{"mappings":"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","sources":["public/js/index.js","public/js/mapbox.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","public/js/login.js","public/js/alerts.js"],"sourcesContent":["/* eslint-disabled */\r\nimport '@babel/polyfill';\r\nimport { displayMap } from './mapbox';\r\nimport { login } from './login';\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.querySelector('.form');\r\n\r\n// DELEGATION\r\nif (mapBox) {\r\n  const locations = JSON.parse(mapBox.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', (e) => {\r\n  e.preventDefault();\r\n  const email = document.getElementById('email').value;\r\n  const password = document.getElementById('password').value;\r\n  login(email, password);\r\n  });\r\n}","/* eslint-disable */\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken = 'pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A';\r\n\r\n  var map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/jonasschmedtmann/cjvi9q8jd04mi1cpgmg7ev3dy',\r\n    scrollZoom: false,\r\n    // center: [-118.11, 34.11],\r\n    // zoom: 10,\r\n    // interactive: false\r\n  });\r\n\r\n  const bounds = new mapboxgl.LatLngBounds();\r\n\r\n  locations.forEach(loc => {\r\n    // Create marker\r\n    const el = document.createElement('div');\r\n    el.className = 'marker';\r\n\r\n    // Add marker\r\n    new mapboxgl.Marker({\r\n      element: el, \r\n      anchor: 'bottom',\r\n    }).setLngLat(loc.coordinates).addTo(map);\r\n\r\n    // Add popup\r\n    new mapboxgl.Popup({\r\n      offset: 30\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n      .addTo(map);\r\n\r\n    // Extend map bounds to include current location\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n};","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","/* eslint-disable */\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://localhost:3000/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password\r\n      }\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err?.response?.data?.message);\r\n  }\r\n};\r\n","/* eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) { \r\n    el.parentElement.removeChild(el);\r\n  }\r\n}\r\n\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../../"}